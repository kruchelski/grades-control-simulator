{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:3001/grade/';\nconst GRADE_VALIDATION = [{\n  id: 1,\n  gradeType: 'Exercícios',\n  minValue: 0,\n  maxValue: 10\n}, {\n  id: 1,\n  gradeType: 'Trabalho prático',\n  minValue: 0,\n  maxValue: 40\n}, {\n  id: 1,\n  gradeType: 'Desafio',\n  minValue: 0,\n  maxValue: 50\n}];\n\nasync function getAllGrades() {\n  const res = await axios.get(API_URL);\n  const grades = res.data.grades.map(grade => {\n    const {\n      student,\n      subject,\n      type\n    } = grade;\n    return { ...grade,\n      studentLowerCase: student.toLowerCase(),\n      subjectLowerCase: subject.toLowerCase(),\n      typeLowerCase: type.toLowerCase(),\n      isDeleted: false\n    };\n  });\n  grades.sort((a, b) => b.id - a.id);\n  let nextId = grades[0].id + 1;\n  let allStudents = new Set();\n  grades.forEach(grade => allStudents.add(grade.student));\n  allStudents = Array.from(allStudents);\n  let allSubjects = new Set();\n  grades.forEach(grade => allSubjects.add(grade.subject));\n  allSubjects = Array.from(allSubjects);\n  let allGradeTypes = new Set();\n  grades.forEach(grade => allGradeTypes.add(grade.type));\n  allGradeTypes = Array.from(allGradeTypes);\n  const allCombinations = [];\n  allStudents.forEach(student => {\n    allSubjects.forEach(subject => {\n      allGradeTypes.forEach(type => {\n        allCombinations.push({\n          student,\n          subject,\n          type\n        });\n      });\n    });\n  });\n  allCombinations.forEach(({\n    student,\n    subject,\n    type\n  }) => {\n    const hasItem = grades.find(grade => {\n      return grade.subject === subject && grade.student === student && grade.type === type;\n    });\n\n    if (!hasItem) {\n      grades.push({\n        id: nextId++,\n        student,\n        studentLowerCase: student.toLowerCase(),\n        subject,\n        subjectLowerCase: subject.toLowerCase(),\n        type,\n        typeLowerCase: type.toLowerCase(),\n        value: 0,\n        isDeleted: true\n      });\n    }\n\n    ;\n  });\n  grades.sort((a, b) => a.typeLowerCase.localeCompare(b.typeLowerCase));\n  grades.sort((a, b) => a.subjectLowerCase.localeCompare(b.subjectLowerCase));\n  grades.sort((a, b) => a.studentLowerCase.localeCompare(b.studentLowerCase));\n  return grades;\n}\n\nexport { getAllGrades };","map":{"version":3,"sources":["/Users/cassiano/Documents/Estudos e leituras/Programação/IGTI/mod03/desafio-04/frontend/src/api/apiService.js"],"names":["axios","API_URL","GRADE_VALIDATION","id","gradeType","minValue","maxValue","getAllGrades","res","get","grades","data","map","grade","student","subject","type","studentLowerCase","toLowerCase","subjectLowerCase","typeLowerCase","isDeleted","sort","a","b","nextId","allStudents","Set","forEach","add","Array","from","allSubjects","allGradeTypes","allCombinations","push","hasItem","find","value","localeCompare"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,8BAAhB;AACA,MAAMC,gBAAgB,GAAG,CACrB;AACIC,EAAAA,EAAE,EAAE,CADR;AAEIC,EAAAA,SAAS,EAAE,YAFf;AAGIC,EAAAA,QAAQ,EAAE,CAHd;AAIIC,EAAAA,QAAQ,EAAE;AAJd,CADqB,EAQrB;AACIH,EAAAA,EAAE,EAAE,CADR;AAEIC,EAAAA,SAAS,EAAE,kBAFf;AAGIC,EAAAA,QAAQ,EAAE,CAHd;AAIIC,EAAAA,QAAQ,EAAE;AAJd,CARqB,EAerB;AACIH,EAAAA,EAAE,EAAE,CADR;AAEIC,EAAAA,SAAS,EAAE,SAFf;AAGIC,EAAAA,QAAQ,EAAE,CAHd;AAIIC,EAAAA,QAAQ,EAAE;AAJd,CAfqB,CAAzB;;AAuBA,eAAeC,YAAf,GAA8B;AAC1B,QAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAN,CAAUR,OAAV,CAAlB;AACA,QAAMS,MAAM,GAAGF,GAAG,CAACG,IAAJ,CAASD,MAAT,CAAgBE,GAAhB,CAAoBC,KAAK,IAAI;AACxC,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,OAAX;AAAoBC,MAAAA;AAApB,QAA6BH,KAAnC;AACA,WAAO,EACH,GAAGA,KADA;AAEHI,MAAAA,gBAAgB,EAAEH,OAAO,CAACI,WAAR,EAFf;AAGHC,MAAAA,gBAAgB,EAAEJ,OAAO,CAACG,WAAR,EAHf;AAIHE,MAAAA,aAAa,EAAEJ,IAAI,CAACE,WAAL,EAJZ;AAKHG,MAAAA,SAAS,EAAE;AALR,KAAP;AAOH,GATc,CAAf;AAUAX,EAAAA,MAAM,CAACY,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACrB,EAAF,GAAOoB,CAAC,CAACpB,EAA/B;AACA,MAAIsB,MAAM,GAAGf,MAAM,CAAC,CAAD,CAAN,CAAUP,EAAV,GAAe,CAA5B;AAEA,MAAIuB,WAAW,GAAG,IAAIC,GAAJ,EAAlB;AACAjB,EAAAA,MAAM,CAACkB,OAAP,CAAef,KAAK,IAAIa,WAAW,CAACG,GAAZ,CAAgBhB,KAAK,CAACC,OAAtB,CAAxB;AACAY,EAAAA,WAAW,GAAGI,KAAK,CAACC,IAAN,CAAWL,WAAX,CAAd;AAEA,MAAIM,WAAW,GAAG,IAAIL,GAAJ,EAAlB;AACAjB,EAAAA,MAAM,CAACkB,OAAP,CAAef,KAAK,IAAImB,WAAW,CAACH,GAAZ,CAAgBhB,KAAK,CAACE,OAAtB,CAAxB;AACAiB,EAAAA,WAAW,GAAGF,KAAK,CAACC,IAAN,CAAWC,WAAX,CAAd;AAEA,MAAIC,aAAa,GAAG,IAAIN,GAAJ,EAApB;AACAjB,EAAAA,MAAM,CAACkB,OAAP,CAAef,KAAK,IAAIoB,aAAa,CAACJ,GAAd,CAAkBhB,KAAK,CAACG,IAAxB,CAAxB;AACAiB,EAAAA,aAAa,GAAGH,KAAK,CAACC,IAAN,CAAWE,aAAX,CAAhB;AAGA,QAAMC,eAAe,GAAG,EAAxB;AACAR,EAAAA,WAAW,CAACE,OAAZ,CAAoBd,OAAO,IAAI;AAC3BkB,IAAAA,WAAW,CAACJ,OAAZ,CAAoBb,OAAO,IAAI;AAC3BkB,MAAAA,aAAa,CAACL,OAAd,CAAsBZ,IAAI,IAAI;AAC1BkB,QAAAA,eAAe,CAACC,IAAhB,CAAqB;AACjBrB,UAAAA,OADiB;AAEjBC,UAAAA,OAFiB;AAGjBC,UAAAA;AAHiB,SAArB;AAKH,OAND;AAOH,KARD;AASH,GAVD;AAYAkB,EAAAA,eAAe,CAACN,OAAhB,CAAwB,CAAC;AAAEd,IAAAA,OAAF;AAAWC,IAAAA,OAAX;AAAoBC,IAAAA;AAApB,GAAD,KAAgC;AACpD,UAAMoB,OAAO,GAAG1B,MAAM,CAAC2B,IAAP,CAAaxB,KAAD,IAAW;AACnC,aACIA,KAAK,CAACE,OAAN,KAAkBA,OAAlB,IACAF,KAAK,CAACC,OAAN,KAAkBA,OADlB,IAEAD,KAAK,CAACG,IAAN,KAAeA,IAHnB;AAKH,KANe,CAAhB;;AAQA,QAAI,CAACoB,OAAL,EAAc;AACV1B,MAAAA,MAAM,CAACyB,IAAP,CAAY;AACRhC,QAAAA,EAAE,EAAEsB,MAAM,EADF;AAERX,QAAAA,OAFQ;AAGRG,QAAAA,gBAAgB,EAAEH,OAAO,CAACI,WAAR,EAHV;AAIRH,QAAAA,OAJQ;AAKRI,QAAAA,gBAAgB,EAAEJ,OAAO,CAACG,WAAR,EALV;AAMRF,QAAAA,IANQ;AAORI,QAAAA,aAAa,EAAEJ,IAAI,CAACE,WAAL,EAPP;AAQRoB,QAAAA,KAAK,EAAE,CARC;AASRjB,QAAAA,SAAS,EAAE;AATH,OAAZ;AAWH;;AAAA;AACJ,GAtBD;AAwBAX,EAAAA,MAAM,CAACY,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACH,aAAF,CAAgBmB,aAAhB,CAA8Bf,CAAC,CAACJ,aAAhC,CAAtB;AACAV,EAAAA,MAAM,CAACY,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACJ,gBAAF,CAAmBoB,aAAnB,CAAiCf,CAAC,CAACL,gBAAnC,CAAtB;AACAT,EAAAA,MAAM,CAACY,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACN,gBAAF,CAAmBsB,aAAnB,CAAiCf,CAAC,CAACP,gBAAnC,CAAtB;AACA,SAAOP,MAAP;AACH;;AAED,SAASH,YAAT","sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:3001/grade/';\nconst GRADE_VALIDATION = [\n    {\n        id: 1,\n        gradeType: 'Exercícios',\n        minValue: 0,\n        maxValue: 10\n    },\n\n    {\n        id: 1,\n        gradeType: 'Trabalho prático',\n        minValue: 0,\n        maxValue: 40\n    },\n\n    {\n        id: 1,\n        gradeType: 'Desafio',\n        minValue: 0,\n        maxValue: 50\n    }\n];\n\nasync function getAllGrades() {\n    const res = await axios.get(API_URL);\n    const grades = res.data.grades.map(grade => {\n        const { student, subject, type } = grade;\n        return {\n            ...grade,\n            studentLowerCase: student.toLowerCase(),\n            subjectLowerCase: subject.toLowerCase(),\n            typeLowerCase: type.toLowerCase(),\n            isDeleted: false,\n        }\n    })\n    grades.sort((a, b) => b.id - a.id);\n    let nextId = grades[0].id + 1;\n\n    let allStudents = new Set();\n    grades.forEach(grade => allStudents.add(grade.student));\n    allStudents = Array.from(allStudents);\n\n    let allSubjects = new Set();\n    grades.forEach(grade => allSubjects.add(grade.subject));\n    allSubjects = Array.from(allSubjects);\n\n    let allGradeTypes = new Set();\n    grades.forEach(grade => allGradeTypes.add(grade.type));\n    allGradeTypes = Array.from(allGradeTypes);\n\n    \n    const allCombinations = [];\n    allStudents.forEach(student => {\n        allSubjects.forEach(subject => {\n            allGradeTypes.forEach(type => {\n                allCombinations.push({\n                    student,\n                    subject,\n                    type\n                });\n            });\n        });\n    });\n\n    allCombinations.forEach(({ student, subject, type }) => {\n        const hasItem = grades.find((grade) => {\n            return (\n                grade.subject === subject &&\n                grade.student === student &&\n                grade.type === type\n            )\n        });\n\n        if (!hasItem) {\n            grades.push({\n                id: nextId++,\n                student,\n                studentLowerCase: student.toLowerCase(),\n                subject,\n                subjectLowerCase: subject.toLowerCase(),\n                type,\n                typeLowerCase: type.toLowerCase(),\n                value: 0,\n                isDeleted: true\n            });\n        };\n    })\n\n    grades.sort((a, b) => a.typeLowerCase.localeCompare(b.typeLowerCase))\n    grades.sort((a, b) => a.subjectLowerCase.localeCompare(b.subjectLowerCase))\n    grades.sort((a, b) => a.studentLowerCase.localeCompare(b.studentLowerCase))\n    return grades;\n}\n\nexport { getAllGrades }"]},"metadata":{},"sourceType":"module"}